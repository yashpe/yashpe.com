////////////////////////////////////////
// Scroll To Pos / jQuery plugin
//
// @author Yair Even Or
// @version 1.0.0 (April 3, 2013)
//
(function($){
    "use strict";

    var currentPos = 0,
        pos        = 0,
        distance   = 0,
        duration   = 200,
        topOffset  = 0,
        root       = $('html, body'),
        scrollTarget;

    // jumpIn - in which container to scroll
    $.fn.scrollToPos = function(jumpIn, quick, offset){
        topOffset = offset != undefined ? offset : 25;
        jumpIn    = jumpIn || root;

        if( quick ){
            pos = $(this).offset().top;
            jumpIn[0].scrollTop = pos + topOffset;
        }
        else{
            scrollToPos.call(this, null, this, jumpIn);
        }
    }

    function scrollToPos(e, jumpTo, jumpIn){
        //if( root.is(':animated') )
        //  return false;
        scrollTarget = jumpTo || $(this).data('scrollto') || $(this).attr('href');

        // scrollTarget can be either an element selector or a number
        if( $(scrollTarget).length ) {
            pos = $(scrollTarget).offset().left;
        }
          
        else if( typeof pos != 'number' )
            return this;


        currentPos = $(document).scrollLeft();
        distance = Math.abs( Math.abs(currentPos) - Math.abs(pos) ); // daley is relative to the jump distance

        if( distance > 100000 )
           duration = 2000;
        else if( distance > 20000 )
           duration = 1500;

         jumpIn.stop().animate({ scrollLeft: pos}, duration, 'easeInOutCirc');

        return this;
  };


  // initialize the plugin
  //$(document).on('click.scrollTop', 'a[data-scrollTo]', scrollToPos);
  $(document).on('click.scrollTo', 'a[data-scrollTo]', scrollToPos);
  
  
  // custom easing functions
  $.easing.jswing = $.easing.swing;
  $.extend($.easing, {
    easeInQuint: function (e, f, a, h, g) {
      return h * (f /= g) * f * f * f * f + a;
    },
    easeOutQuint: function (e, f, a, h, g) {
      return h * ((f = f / g - 1) * f * f * f * f + 1) + a;
    },
    easeInOutQuart: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
        return -c/2 * ((t-=2)*t*t*t - 2) + b;
    },
    easeInOutCirc: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
        return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
    }
  });
})(jQuery);


